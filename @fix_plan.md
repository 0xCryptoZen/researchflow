# ResearchFlow 修复计划

## 执行优先级

> 按 P0 → P1 → P2 → P3 排列，每个任务 5-30 分钟

---

## 当前进度总览 (2026-02-18)

### ✅ 已完成
- **P0-1**: Cloudflare Workers OAuth + D1 基础架构
- **P0-2**: 数据同步能力（增量同步、Repository 云端模式、离线缓存）
- **P0-3**: 存储层统一（5个新仓储）
- **P1-1**: 论文来源扩展（Google Scholar/IEEE/ACM）
- **P1-2**: 会议自动更新 + N天提醒
- **P1-3**: 任务增强
- **P2-1**: 提醒系统（邮件/飞书/Telegram）
- **P2-2**: LaTeX 模板
- **P2-3**: 参考文献（DOI解析、引用格式化）
- **P2-4**: 图表管理（上传、复用）
- **P3-1**: 每日推荐（基于领域推荐、定时任务）
- **P3-2**: 大纲生成（AI 辅助、收藏论文生成）
- **P3-3**: 写作进度（截止日期拆解、自动提醒）

### 🔄 进行中
- **US-001**: GitHub 登录（部分完成，需要真实 OAuth）
- **US-003**: 论文来源集成（arXiv/DBLP 已接入，其他待完善）
- **US-006**: 会议截稿倒计时
- **US-007**: 任务/待办管理
- **US-008**: 提醒系统
- **US-009**: LaTeX 模板库
- **US-010**: 论文大纲生成
- **US-011**: 参考文献管理
- **US-012**: 图表管理
- **US-014**: 写作进度提醒

### ⬜ 未开始
- **P3-2**: 大纲生成
- **P3-3**: 写作进度
- **US-005**: 每日论文推荐
- **US-016**: 数据同步（与 P0-2 合并理解）

---

## P0 - 核心架构 (已完成) ✅

### P0-1 完善 GitHub OAuth + D1 持久化
- [x] P0-1.1 创建 Cloudflare Workers 项目结构
- [x] P0-1.2 配置 D1 数据库 schema
- [x] P0-1.3 实现 GitHub OAuth 回调接口
- [x] P0-1.4 迁移用户数据到 D1

### P0-2 数据同步能力
- [x] P0-2.1 实现增量同步 API
- [x] P0-2.2 改造 Repository 层支持云端模式
- [x] P0-2.3 添加离线缓存支持

### P0-3 存储层统一
- [x] P0-3.1 补齐剩余模块仓储化
- [x] P0-3.2 完善 storage service 事件机制

---

## P1 - 核心功能补齐 (已完成) ✅

### P1-1 论文来源扩展
- [x] P1-1.1 接入 Google Scholar 搜索
- [x] P1-1.2 接入 IEEE Xplore API
- [x] P1-1.3 接入 ACM DL API

### P1-2 会议自动更新
- [x] P1-2.1 抓取会议官网 deadline
- [x] P1-2.2 实现 N 天规则化提醒

### P1-3 任务增强
- [x] P1-3.1 优化任务编辑 UI
- [x] P1-3.2 任务关联论文/会议完整

---

## P2 - 体验优化 (进行中)

### P2-1 提醒系统
- [x] P2-1.1 接入邮件通知 (SMTP/SendGrid)
- [x] P2-1.2 接入飞书/钉钉 webhook
- [x] P2-1.3 接入 Telegram Bot 通知

### P2-2 LaTeX 模板
- [x] P2-2.1 实现模板预览功能
- [x] P2-2.2 实现模板克隆/下载

### P2-3 参考文献
- [x] **P2-3.1** 实现 DOI 解析自动填充 (15min)
- [x] **P2-3.2** 实现引用样式格式化 (15min)

### P2-4 图表管理
- [x] **P2-4.1** 实现图片上传到 R2/Cloudflare Images (15min)
- [x] **P2-4.2** 实现跨论文复用机制 (10min)

---

## P3 - 高价值特性

### P3-1 每日推荐
- [x] **P3-1.1** 实现基于领域的论文推荐算法 (20min)
- [x] **P3-1.2** 实现定时任务调度 (Cloudflare Scheduled Tasks) (15min)

### P3-2 大纲生成
- [x] **P3-2.1** 基于收藏论文生成大纲建议 (15min)
- [x] **P3-2.2** AI 辅助大纲优化 (调用 LLM API) (20min)

### P3-3 写作进度
- [x] **P3-3.1** 截止日期自动拆解 (10min)
- [x] **P3-3.2** 自动提醒机制 (10min)

---

## P4 - 完善与优化 (新增)

### P4-1 用户体验
- [ ] **P4-1.1** 移动端响应式适配 (20min)
- [ ] **P4-1.2** 深色模式支持 (15min)
- [ ] **P4-1.3** 主题切换功能 (10min)
- [ ] **P4-1.4** 加载状态与骨架屏 (10min)
- [ ] **P4-1.5** 错误边界与重试机制 (10min)

### P4-2 性能优化
- [ ] **P4-2.1** 代码分割与懒加载 (15min)
- [ ] **P4-2.2** 缓存策略优化 (10min)
- [ ] **P4-2.3** 大列表虚拟滚动 (15min)

### P4-3 测试与质量
- [ ] **P4-3.1** 单元测试覆盖 (20min)
- [ ] **P4-3.2** E2E 测试用例 (20min)
- [ ] **P4-3.3** CI/CD 流程完善 (15min)

### P4-4 文档
- [ ] **P4-4.1** API 文档生成 (10min)
- [ ] **P4-4.2** 用户使用文档 (15min)
- [ ] **P4-4.3** 贡献指南 (10min)

---

## 实施建议

1. **优先完成 P2-3、P2-4** - 完善参考文献和图表功能
2. **P3 任务可并行** - 每日推荐、大纲生成、写作进度
3. **P4 穿插进行** - 用户体验和性能优化持续迭代

---

## 状态更新

最后更新: 2026-02-18 12:30
